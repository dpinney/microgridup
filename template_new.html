<!DOCTYPE html>
<html lang="en">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel='stylesheet' href='/main.css'/>
        <title>MicrogridUP &raquo; New</title>
        <!-- <link rel='stylesheet' href='/template.css'/> -->
        <style type="text/css">
            body {
                margin:0;
                padding:0;
                border:0;
                font-family:sans-serif;
            }
            h3 {
                margin-bottom:7px;
                margin-left: 5px;
            }
            .chunk {
                display: inline-block;
                background-color: lightgray;
                padding: 6px;
                border-radius: 4px;
                margin: 4px 2px 4px 2px;
            }
            #holder {
                width: 100%;
                margin-left: 4px;
            }
            button, input[type='submit'], label.fileButton {
                width:auto;
                padding: 9px;
                margin-right:3px;
                font-size:small;
                background:seagreen;
                -webkit-border-radius: 5px;
                -moz-border-radius: 5px;
                border-radius: 5px;
                border: none;
                color: white;
                cursor:pointer;
            }
            textarea {
                font-size: 12pt;
                margin-left: 5px;
                display: inline-block;
            }
            .advanced {
                display: inline-block;
                max-width: 50%;
                min-width: 500px;
            }
        </style>
    </head>
    <body>
        <header>
            <nav class="js-nav--topNav">
                <div>
                    <a href="/">
                        <span class="span--sectionTitle">MicrogridUp &raquo; New</span>
                    </a>
                </div>
            </nav>
        </header>
        <main>
            <form action="/run" method="post" enctype="multipart/form-data">
                <h3>General Inputs</h3>
                <div id="holder">
                    <div class="chunk">
                        <label for="MODEL_DIR">Model Name</label>
                        <input type="text" name="MODEL_DIR" value="{{in_data.MODEL_DIR}}">
                    </div>
                    {% if 'BASE_DSS' in in_data %}
                    <div class="chunk">
                        <label for="BASE_DSS_NAME">Circuit Definition (.dss)</label>
                        <input type="text" name="BASE_DSS_NAME" value="{{in_data.BASE_DSS}}" readonly>
                    </div>
                    {% else %}
                    <div class="chunk">
                        <label for="BASE_DSS">Circuit Definition (.dss)</label>
                        <input type="file" name="BASE_DSS">
                    </div>
                    {% endif %}
                    {% if 'LOAD_CSV' in in_data %}
                    <div class="chunk">
                        <label for="LOAD_CSV_NAME">Load Data (.csv)</label>
                        <input type="text" name="LOAD_CSV_NAME" value="{{in_data.LOAD_CSV}}" readonly>
                    </div>
                    {% else %}
                    <div class="chunk">
                        <label for="LOAD_CSV">Load Data (.csv)</label>
                        <input type="file" name="LOAD_CSV">
                    </div>
                    {% endif %}
                    <div class="chunk">
                        <label for="FAULTED_LINE">Outage Location(s)</label>
                        <input type="text" name="FAULTED_LINE" value="{{in_data.FAULTED_LINE}}">
                    </div>
                    <div class="chunk">
                        <label for="QSTS_STEPS">Interconn. Time Steps</label>
                        <input type="text" name="QSTS_STEPS" value="{{in_data.QSTS_STEPS}}">
                    </div>
                    <div class="chunk">
                        <label for="CRITICAL_LOADS">Critical Loads</label>
                        <input type="text" name="CRITICAL_LOADS" value="{{in_data.CRITICAL_LOADS}}">
                    </div>
                    <div class="chunk">
                        <label for="DIESEL_SAFETY_FACTOR">Fossil Saftey Margin (%)</label>
                        <input type="text" name="DIESEL_SAFETY_FACTOR" value="{{in_data.DIESEL_SAFETY_FACTOR}}">
                    </div>
                    <div class="chunk">
                        <label for="FOSSIL_BACKUP_PERCENT">Allowed Fossil (%)</label>
                        <input type="text" name="FOSSIL_BACKUP_PERCENT" value="{{in_data.FOSSIL_BACKUP_PERCENT}}">
                    </div>
                    <div class="chunk">
                        <label for="MG_DEF_METHOD">Microgrid Definition Method</label>
                        <select name="MG_DEF_METHOD" style="margin-right:6px">
                            <option value="manual" {% if in_data.MG_DEF_METHOD == 'manual' %}selected{% endif %}>Manual</option>
                            <option value="lukes" {% if in_data.MG_DEF_METHOD == 'lukes' %}selected{% endif %}>Lukes</option>
                            <option value="branch" {% if in_data.MG_DEF_METHOD == 'branch' %}selected{% endif %}>Branch</option>
                        </select></br>
                    </div>
                    <input type="submit" value="Run Model">
                </div>
                <div class="advanced">
                    <h3>Advanced REOpt Inputs</h3>
                    <textarea name="REOPT_INPUTS" rows="20" cols="100">{{in_data.REOPT_INPUTS | tojson}}</textarea>
                </div>
                <div class="advanced">
                    <h3>Advanced Microgrid Definitions</h3>
                    <textarea name="MICROGRIDS" rows="20" cols="100">{{in_data.MICROGRIDS | tojson}}</textarea>
                </div>
            </form>
        </main>
    </body>
</html>